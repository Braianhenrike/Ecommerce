{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\braia\\\\Desktop\\\\Loja virtual\\\\Front\\\\src\\\\views\\\\Login.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { request } from '../axios_helper';\nimport { Button, Card, CardHeader, CardBody, CardTitle, CardFooter, Label, Form, FormGroup, Input, Col, Alert } from \"reactstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login(props) {\n  _s();\n  const history = useHistory();\n  const [login, setLogin] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  useEffect(() => {\n    localStorage.removeItem(\"apiUser\");\n    localStorage.removeItem(\"apiToken\");\n    localStorage.removeItem(\"apiRole\");\n  }, []);\n  async function handleSubmit(event) {\n    setError(null);\n    event.preventDefault();\n    if (!login || !password) {\n      setError(\"All fields are mandatory\");\n      console.log(\"All fields are mandatory\");\n      return;\n    }\n    setIsSubmitting(true);\n    try {\n      const res = await request(\"POST\", \"/auth/login\", {\n        login: login,\n        password: password\n      }, {\n        cache: 'no-store'\n      });\n      if (res.data.token) {\n        console.log(\"Autenticado com sucesso\");\n        localStorage.setItem(\"apiUser\", res.data.userId);\n        localStorage.setItem(\"apiToken\", res.data.token);\n        localStorage.setItem(\"apiRole\", res.data.rolem);\n        history.push(\"/user/home\");\n      }\n    } catch (err) {\n      console.log(\"Erro ao fazer login:\", err.message);\n      setError(err.message);\n    }\n    setIsSubmitting(false);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Col, {\n      className: \"ml-auto mr-auto col-md-6 col-lg-4\",\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            children: /*#__PURE__*/_jsxDEV(CardTitle, {\n              tag: \"h3\",\n              children: \"Login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n            children: [/*#__PURE__*/_jsxDEV(Alert, {\n              isOpen: error != null,\n              color: \"danger\",\n              children: error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                children: \"Login\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                placeholder: \"Login\",\n                type: \"login\",\n                autoComplete: \"login\",\n                value: login,\n                onChange: e => setLogin(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                children: \"Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                placeholder: \"Password\",\n                type: \"password\",\n                autoComplete: \"password\",\n                value: password,\n                onChange: e => setPassword(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Don't have an account? \", /*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"/auth/register\",\n                children: \"Register\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 40\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardFooter, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              className: \"btn-fill\",\n              color: \"primary\",\n              type: \"submit\",\n              onClick: e => handleSubmit(e),\n              children: [\"Login\", isSubmitting ? \"...\" : \"\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"EL3S64oGWsPcvObXzITntndSNBM=\", false, function () {\n  return [useHistory];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useEffect","useState","useHistory","request","Button","Card","CardHeader","CardBody","CardTitle","CardFooter","Label","Form","FormGroup","Input","Col","Alert","jsxDEV","_jsxDEV","Login","props","_s","history","login","setLogin","password","setPassword","error","setError","isSubmitting","setIsSubmitting","localStorage","removeItem","handleSubmit","event","preventDefault","console","log","res","cache","data","token","setItem","userId","rolem","push","err","message","children","className","tag","fileName","_jsxFileName","lineNumber","columnNumber","isOpen","color","placeholder","type","autoComplete","value","onChange","e","target","href","onClick","_c","$RefreshReg$"],"sources":["C:/Users/braia/Desktop/Loja virtual/Front/src/views/Login.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nimport { request } from '../axios_helper';\n\nimport {\n  Button,\n  Card,\n  CardHeader,\n  CardBody,\n  CardTitle,\n  CardFooter,\n  Label,\n  Form,\n  FormGroup,\n  Input,\n  Col,\n  Alert\n} from \"reactstrap\";\n\nfunction Login(props) {\n  const history = useHistory();\n  const [login, setLogin] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  useEffect(() => {\n    localStorage.removeItem(\"apiUser\");\n    localStorage.removeItem(\"apiToken\");\n    localStorage.removeItem(\"apiRole\");\n  }, []);\n\n  async function handleSubmit(event) {\n    setError(null);\n\n    event.preventDefault();\n    if (!login || !password) {\n      setError(\"All fields are mandatory\");\n      console.log(\"All fields are mandatory\");\n      return;\n    }\n    setIsSubmitting(true);\n\n    try {\n      const res = await request(\"POST\", \"/auth/login\", { login: login, password: password }, { cache: 'no-store' });\n\n      if (res.data.token) {\n        console.log(\"Autenticado com sucesso\");\n\n        localStorage.setItem(\"apiUser\", res.data.userId);\n        localStorage.setItem(\"apiToken\", res.data.token);\n        localStorage.setItem(\"apiRole\", res.data.rolem);\n\n        history.push(\"/user/home\");\n      }\n    } catch (err) {\n      console.log(\"Erro ao fazer login:\", err.message);\n      setError(err.message);\n    }\n\n    setIsSubmitting(false);\n  }\n  return (\n    <div>\n      <Col className=\"ml-auto mr-auto col-md-6 col-lg-4\">\n        <Card>\n          <Form>\n            <CardHeader>\n              <CardTitle tag=\"h3\">Login</CardTitle>\n            </CardHeader>\n            <CardBody>\n              <Alert isOpen={error != null} color=\"danger\">\n                {error}\n              </Alert>\n              <FormGroup>\n                <Label>Login</Label>\n                <Input\n                  placeholder=\"Login\"\n                  type=\"login\"\n                  autoComplete=\"login\"\n                  value={login}\n                  onChange={e => setLogin(e.target.value)}\n                />\n              </FormGroup>\n\n              <FormGroup>\n                <Label>Password</Label>\n                <Input\n                  placeholder=\"Password\"\n                  type=\"password\"\n                  autoComplete=\"password\"\n                  value={password}\n                  onChange={e => setPassword(e.target.value)}\n                />\n              </FormGroup>\n\n              <span>\n                Don't have an account? <a href=\"/auth/register\">Register</a>\n              </span>\n            </CardBody>\n            <CardFooter>\n              <Button\n                className=\"btn-fill\"\n                color=\"primary\"\n                type=\"submit\"\n                onClick={e => handleSubmit(e)}\n              >\n                Login\n                {isSubmitting ? \"...\" : \"\"}\n              </Button>\n            </CardFooter>\n          </Form>\n        </Card>\n      </Col>\n    </div>\n  );\n}\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}